---
import { meta } from '../../utils/const';

import Companies from './Companies.astro';
import Projects from './Projects.astro';
import Spacer from './Spacer.astro';
---

<Spacer color="bg-gray-200"/>

<div class="flex justify-center mt-6 mb-4">
	<a
		href="javascript:void(0)"
		class="project-toggle active -ml-4 mr-4 float-right prose dark:text-gray-300 font-bold hover:text-blue-500"
	>
		Recent Projects
	</a>
	<a
		href="javascript:void(0)"
		class="project-toggle float-right prose dark:text-gray-300 font-bold hover:text-blue-500"
	>
		Top Projects</a
	>
</div>
<hr class="short" />

<div id="recent-projects" class="hidden">
	<!-- Top Projects -->
	<Companies type="projects" title={meta.topProjects.title} description={meta.topProjects.description} />
	<Spacer />
</div>
<div id="top-projects" class="">
	<!-- Projects -->
	<Projects />
</div>

<script lang="js">
	// get button by class project-toggle
	const projectToggle = document.querySelectorAll('.project-toggle');
	for (let i = 0; i < projectToggle.length; i++) {
		projectToggle[i].addEventListener('click', function () {
			const recentProjects = document.getElementById('recent-projects');
			const topProjects = document.getElementById('top-projects');
			// hide the recent projects
			recentProjects.classList.toggle('hidden');
			// hide the top projects
			topProjects.classList.toggle('hidden');
			// add active class to the clicked button, and remove from the other.
			projectToggle[i].classList.add('active');
			projectToggle[i === 0 ? 1 : 0].classList.remove('active');
		});
	}
</script>
