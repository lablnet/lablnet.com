---
import '../styles/index.css';

import ThemeToggle from '../components/ThemeToggle';
interface Props {
	title: string;
}

const { title } = Astro.props;

import '@fortawesome/fontawesome-free/css/all.min.css';
let medias = [
	{
		picture: './assets/icons/twitter.svg',
		link: 'https://twitter.com/lablnet',
	},
	{
		picture: './assets/icons/upwork.svg',
		link: 'https://www.upwork.com/freelancers/~010c32fc720f5f9624',
	},
	{
		picture: './assets/icons/fiverr.svg',
		link: 'https://fiverr.com/umerlablnet01',
	},
];
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Astro description" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500&display=swap"
			rel="stylesheet"
		/>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.14.0/devicon.min.css" />
		<title>{title}</title>
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-JKMM6EQFM6"></script>
		<script lang="js">
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag('js', new Date());

			gtag('config', 'G-JKMM6EQFM6');
		</script>
	</head>
	<body id="app-theme" class="app-theme">
		<div class="light">
			<div class="dark:text-white light-text-color bg-white dark:bg-gray-700">
				<header
					x-data="{ mobileMenuOpen : false }"
					class="flex flex-wrap flex-row
					justify-between
					md:items-center md:space-x-4
					py-6
					px-6
					top-0
					z-50
					animated
					shadow-lg
					dark:bg-gray-900
					bg-white
					relative"
				>
					<a href="/" class="block">
						<span class="sr-only"></span>
						<img class="" src="../assets/images/muf.png" alt="Logo" width="100" height="100" title="Logo" />
					</a>
					<span class="inline-block mx-auto mr-1 mt-1 md:hidden">
						<ThemeToggle client:load />
					</span>

					<button id="menu-button" class="inline-block md:hidden w-8 h-8 p-1">
						<svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
							<path
								fill-rule="evenodd"
								d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
								clip-rule="evenodd"></path>
						</svg>
					</button>

					<nav
						id="nav"
						class="absolute
					  md:relative
					  top-16
					  left-0
					  md:top-0
					  z-20
					  md:flex
					  flex-col
					  md:flex-row md:space-x-6
					  font-semibold
					  w-full
					  md:w-auto
					  shadow-md
					  rounded-lg
					  md:rounded-none md:shadow-none
					  p-6
					  pt-0
					  md:p-0
					  dark:bg-gray-900
					  bg-white
					  hidden
					  md:block"
					>
						<a href="#" id="projectsButton" class="block py-1">
							<i class="fa-solid fa-bars-progress"></i> Work
							<div
								id="dropdownMenu"
								class="absolute bg-white shadow-md mt-2 p-2 w-48 rounded-md z-50 mt-6"
								style="display: none;"
							>
								<a href="/#projects" class="block py-1 dropdown-item">Work Experience</a>
								<a href="/#top" class="block py-1 dropdown-item">Top Projects</a>
								<a href="/#recent" class="block py-1 dropdown-item">Recent Projects</a>
							</div>
						</a>
						<a href="/#skills" class="block py-1 menu-item"><i class="fa-solid fa-chalkboard"></i> Skills</a
						>
						<a href="/#education" class="block py-1 menu-item"
							><i class="fa-solid fa-graduation-cap"></i> Education</a
						>
						<a href="/#certificates" class="block py-1 menu-item"
							><i class="fa-solid fa-certificate"></i> Certificates</a
						>
						<a href="/quotes" class="block py-1 menu-item"><i class="fa-solid fa-quote-left"></i> Quotes</a>
						<a href="https://lablnet.com/cv/CV.pdf" target="_blank" class="block py-1 menu-item"
							><i class="fa-solid fa-file"></i> CV</a
						>
						<a href="/#contact" class="block py-1"><i class="fa-solid fa-address-book"></i> Contact</a>

						<span class="hidden md:inline-block mt-1">
							<ThemeToggle client:load />
						</span>
					</nav>
				</header>
				<!-- <div class="">
				  <ProgressBar />
				</div>
					   -->
			</div>
			<main class="dark:bg-gray-700">
				<slot />
			</main>

			<!-- Footer -->
			<footer class="text-gray-600 body-font">
				<div class="bg-gray-100 dark:text-white dark:bg-gray-900">
					<div class="container
				  px-5
				  py-6
				  mx-auto
				  flex
				  items-center
				  sm:flex-row
				  flex-col">
						<a href="/" class="flex
					title-font
					font-medium
					items-center
					md:justify-start
					justify-center">
							<span class="ml-3">
								<img
									src="./assets/images/muf.png"
									style="width: 80px; height 80px;"
									alt="Muhammad Umer Farooq"
								/>
							</span>
						</a>
						<p class="inline-flex
					text-sm text-gray-500
					dark:text-gray-300
					sm:ml-6 sm:mt-0
					mt-4">
							Made with &nbsp;
							<img class="h-6 w-6" src="../assets/icons/heart.gif" />
							&nbsp; By &nbsp;
							<a
								class="font-bold"
								href="https://github.com/lablnet"
								target="_blank"
								rel="noopener noreferrer">Muhammad Umer Farooq</a
							>
						</p>
						<span class="inline-flex
					sm:ml-auto sm:mt-0
					mt-4
					justify-center
					sm:justify-start">
							<a
								href="https://github.com/lablnet"
								target="_blank"
								rel="noopener noreferrer"
								class="ml-3 text-gray-500 mt-1 github">ㅤ</a
							>
							{
								medias.map((media) => (
									<a
										href={media.link}
										target="_blank"
										rel="noopener noreferrer"
										class="ml-3 text-gray-500"
									>
										<img style="width: 1.6em; height: 1.6em" src={media.picture} />
									</a>
								))
							}
							<a
								href="https://linkedin.com/in/lablnet"
								target="_blank"
								rel="noopener noreferrer"
								class="ml-3 text-gray-500 mt-1 linkedin">ㅤ</a
							>
						</span>
					</div>
				</div>
			</footer>
		</div>
	</body>

	<script is:inline>
		// theme
		const theme = (() => {
			if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
				return localStorage.getItem('theme');
			}
			if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
				return 'dark';
			}
			return 'light';
		})();

		if (theme === 'light') {
			document.documentElement.classList.remove('dark');
			document.body.classList.remove('dark');
		} else {
			document.documentElement.classList.add('dark');
			document.body.classList.add('dark');
		}
		window.localStorage.setItem('theme', theme);

		// mobile menu
		let menuVisible = false;

		function toggleMenu() {
			const nav = document.getElementById('nav');
			menuVisible = !menuVisible;
			// @ts-ignore
			nav.classList.toggle('hidden', !menuVisible);
		}

		let elements = document.getElementsByClassName('menu-item');
		for (let i = 0; i < elements.length; i++) {
			elements[i].addEventListener('click', toggleMenu);
		}
		// @ts-ignore
		document.getElementById('menu-button').addEventListener('click', toggleMenu);

		// dropdown menu
		let dropdownMenu = document.getElementById('dropdownMenu');
		let projectsButton = document.getElementById('projectsButton');
		let dropdownItems = document.getElementsByClassName('dropdown-item');
		for (let i = 0; i < dropdownItems.length; i++) {
			dropdownItems[i].addEventListener('click', function (event) {
				dropdownMenu.style.display = 'none';
			});
		}
		projectsButton.addEventListener('click', function (event) {
			event.preventDefault();
			if (dropdownMenu.style.display === 'none') {
				dropdownMenu.style.display = 'block';
			} else {
				dropdownMenu.style.display = 'none';
			}
		});

		// Hide dropdown when clicking outside
		document.addEventListener('click', function (event) {
			let isClickInside = projectsButton.contains(event.target) || dropdownMenu.contains(event.target);

			if (!isClickInside && dropdownMenu.style.display === 'block') {
				dropdownMenu.style.display = 'none';
			}
		});
	</script>
</html>
